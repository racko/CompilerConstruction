cc_library(
    name = "ranges",
    srcs = ["ranges.h"],
    includes = ["."],
    visibility = ["//visibility:public"],
)

cc_library(
    name = "poker",
    srcs = [
        "bits.h",
        "determine_hand_rank.cpp",
        "determine_hand_rank.h",
        "hand_rank.cpp",
        "hand_rank.h",
        "iterative_fold.h",
        "poker.cpp",
        "poker_dfa.cpp",
        "poker_dfa.h",
        "poker_dfa_serialization.cpp",
        "poker_dfa_serialization.h",
        "rank_count.cpp",
        "rank_count.h",
        "rank_set.cpp",
        "rank_set.h",
        "ranks.cpp",
        "ranks.h",
        "recursive_fold.h",
        "significant_ranks.cpp",
        "significant_ranks.h",
        "sorted_cards.cpp",
        "sorted_cards.h",
        "sorted_cards_evaluation.cpp",
        "sorted_cards_evaluation.h",
        "states.h",
        "straight.cpp",
        "straight.h",
        "terminals.cpp",
        "terminals.h",
        "transition.h",
        "types.h",
    ],
    hdrs = ["poker.h"],
    deps = [
        "//Regex:util",
        "@boost//:filesystem",
        #"@boost//:iterator",
        "@boost//:serialization",
        ":ranges",
    ],
)

cc_test(
    name = "poker_dfa_test",
    srcs = ["poker_test.cpp"],
    linkopts = ["-ltcmalloc"],
    deps = [
        ":poker",
        "//Regex:catch_main",
        "@catch2",
    ],
)
